<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeSync Bot</title>
    <style>
        /* X.com-inspired styling with mobile-first approach */
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #000;
            color: #fff;
            line-height: 1.4;
        }
        .container {
            max-width: 100%;
            padding: 10px;
            margin: 0 auto;
        }
        h1 {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
            margin: 0 0 10px 0;
        }
        .status {
            font-size: 13px;
            color: #71767b;
            margin-bottom: 15px;
        }
        .section {
            margin-bottom: 15px;
            background: #15181c;
            border-radius: 8px;
            padding: 10px;
            border: 1px solid #2f3336;
        }
        .section h2 {
            font-size: 15px;
            font-weight: 700;
            color: #fff;
            margin: 0 0 10px 0;
        }
        .cards-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .card {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: #1d2023;
            border-radius: 6px;
            border: 1px solid #2f3336;
        }
        .card h3 {
            font-size: 13px;
            color: #71767b;
            margin: 0;
        }
        .card p {
            font-size: 15px;
            font-weight: 700;
            color: #fff;
            margin: 0;
        }
        .trades-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        .trades-table th, .trades-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #2f3336;
        }
        .trades-table th {
            color: #71767b;
            font-weight: 700;
        }
        .trades-table td {
            color: #fff;
        }
        /* Responsive adjustments */
        @media (min-width: 600px) {
            .container {
                max-width: 600px;
                padding: 15px;
            }
            h1 {
                font-size: 24px;
            }
            .status {
                font-size: 14px;
            }
            .section {
                padding: 15px;
            }
            .section h2 {
                font-size: 16px;
            }
            .card {
                padding: 10px;
            }
            .card h3 {
                font-size: 14px;
            }
            .card p {
                font-size: 16px;
            }
            .trades-table {
                font-size: 14px;
            }
            .trades-table th, .trades-table td {
                padding: 10px;
            }
            .cards-container {
                flex-direction: row;
                flex-wrap: wrap;
            }
            .card {
                flex: 1 1 calc(33% - 10px);
                min-width: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TradeSync Bot</h1>
        <div class="status">Status: Healthy</div>

        <!-- Portfolio Overview -->
        <div class="section">
            <h2>Portfolio Overview</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Total Value</h3>
                    <p id="total-value">Loading...</p>
                </div>
                <div class="card">
                    <h3>Daily P&L</h3>
                    <p id="daily-pl">Loading...</p>
                </div>
                <div class="card">
                    <h3>Positions</h3>
                    <p id="positions">Loading...</p>
                </div>
            </div>
        </div>

        <!-- Recent Trades -->
        <div class="section">
            <h2>Recent Trades</h2>
            <table class="trades-table">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Type</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody id="trades-body">
                    <tr>
                        <td colspan="5">Loading trades...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- AI Insights -->
        <div class="section">
            <h2>AI Insights</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Recommendation</h3>
                    <p>Buy TSLA</p>
                </div>
                <div class="card">
                    <h3>Confidence</h3>
                    <p>85%</p>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="section">
            <h2>Performance Metrics</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Total Profit</h3>
                    <p>$12,345.67</p>
                </div>
                <div class="card">
                    <h3>Win Rate</h3>
                    <p>68%</p>
                </div>
                <div class="card">
                    <h3>Sharpe Ratio</h3>
                    <p>1.45</p>
                </div>
            </div>
        </div>

        <!-- Strategy Settings -->
        <div class="section">
            <h2>Strategy Settings</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Risk Level</h3>
                    <p>Moderate</p>
                </div>
                <div class="card">
                    <h3>Assets</h3>
                    <p>AAPL, TSLA, MSFT</p>
                </div>
            </div>
        </div>

        <!-- Market Sentiment -->
        <div class="section">
            <h2>Market Sentiment</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Overall</h3>
                    <p>Bullish</p>
                </div>
                <div class="card">
                    <h3>Tech Sector</h3>
                    <p>Neutral</p>
                </div>
            </div>
        </div>

        <!-- Alerts/Notifications -->
        <div class="section">
            <h2>Alerts</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Last Alert</h3>
                    <p>AAPL hit $175</p>
                </div>
                <div class="card">
                    <h3>Status</h3>
                    <p>Active</p>
                </div>
            </div>
        </div>

        <!-- Portfolio Allocation -->
        <div class="section">
            <h2>Portfolio Allocation</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>AAPL</h3>
                    <p>40%</p>
                </div>
                <div class="card">
                    <h3>TSLA</h3>
                    <p>30%</p>
                </div>
                <div class="card">
                    <h3>Cash</h3>
                    <p>30%</p>
                </div>
            </div>
        </div>

        <!-- Trade History Analysis -->
        <div class="section">
            <h2>Trade History</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Total Trades</h3>
                    <p>150</p>
                </div>
                <div class="card">
                    <h3>Profitable</h3>
                    <p>102</p>
                </div>
            </div>
        </div>

        <!-- Risk Management -->
        <div class="section">
            <h2>Risk Management</h2>
            <div class="cards-container">
                <div class="card">
                    <h3>Stop-Loss</h3>
                    <p>2%</p>
                </div>
                <div class="card">
                    <h3>Max Drawdown</h3>
                    <p>10%</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Fetch portfolio data
        async function loadPortfolio() {
            try {
                const response = await fetch('/api/portfolio');
                const data = await response.json();
                if (data.error) throw new Error(data.error);
                document.getElementById('total-value').textContent = `$${data.total_value.toFixed(2)}`;
                document.getElementById('daily-pl').textContent = `${data.daily_pl > 0 ? '+' : ''}${data.daily_pl}%`;
                document.getElementById('positions').textContent = data.positions;
            } catch (error) {
                console.error('Error loading portfolio:', error);
                document.getElementById('total-value').textContent = 'Error';
                document.getElementById('daily-pl').textContent = 'Error';
                document.getElementById('positions').textContent = 'Error';
            }
        }

        // Fetch trades data
        async function loadTrades() {
            try {
                const response = await fetch('/api/trades');
                const trades = await response.json();
                if (trades.error) throw new Error(trades.error);
                const tbody = document.getElementById('trades-body');
                tbody.innerHTML = '';
                if (trades.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5">No recent trades</td></tr>';
                } else {
                    trades.forEach(trade => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${trade.symbol}</td>
                            <td>${trade.type}</td>
                            <td>${trade.qty}</td>
                            <td>${trade.price}</td>
                            <td>${trade.time}</td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            } catch (error) {
                console.error('Error loading trades:', error);
                document.getElementById('trades-body').innerHTML = '<tr><td colspan="5">Error loading trades</td></tr>';
            }
        }

        // Load data on page load
        window.onload = () => {
            loadPortfolio();
            loadTrades();
        };
    </script>
</body>
</html>